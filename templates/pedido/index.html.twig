{% extends 'base.html.twig' %}

{% block stylesheets %}

    {{ parent() }}

    <link href="{{ asset(plugins_path ~ 'custom/datatables/datatables.bundle.css') }}" rel="stylesheet" type="text/css"/>

    <style>
        .label-light-secondary{
            color:black !important;
        }

        td {
            padding-top: 0 !important;
            padding-bottom: 0.4rem !important;
        }
    </style>

{% endblock %}

{% block body %}
    <!--begin::Card-->
    <div class="card card-custom">
        <div class="card-header">
            <div class="card-title">
                <span class="card-icon"><i class="flaticon2-layers text-primary"></i></span>
                <h3 class="card-label">Pedidos registrados</h3>
            </div>
            <div class="card-toolbar">
                {% if is_granted('ROLE_PEDIDO') %}
                    <a href="{{ path('pedido_new') }}" class="btn btn-primary font-weight-bolder mr-2">
                        <i class="la la-plus"></i>
                        Agregar
                    </a>
                {% endif %}
                <div class="dropdown dropdown-inline">
                    <div class="dropdown dropdown-inline  mr-2">
                        <button type="button" class="btn btn-light-primary font-weight-bolder dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Exportar
                        </button>
                        <div class="dropdown-menu dropdown-menu-sm dropdown-menu-right" style="">
                            <ul class="navi flex-column navi-hover py-2">
                                <li class="navi-header font-weight-bolder text-uppercase font-size-sm text-primary pb-2">Elija una opci&oacute;n:</li>
                                <li class="navi-item" onClick="exportarCustom('print');">
                                    <a href="#" class="navi-link">
                                        <span class="navi-icon">
                                            <i class="la la-file-excel-o text-success"></i>
                                        </span>
                                        <span class="navi-text">Print</span>
                                    </a>
                                </li>
                                <li class="navi-item" onClick="exportarCustom('pagina');">
                                    <a href="#" class="navi-link">
                                        <span class="navi-icon">
                                            <i class="la la-file-excel-o text-success"></i>
                                        </span>
                                        <span class="navi-text">Excel - P&aacute;gina</span>
                                    </a>
                                </li>
                                <li class="navi-item" onClick="exportarCustom('filtrados');">
                                    <a href="#" class="navi-link">
                                        <span class="navi-icon">
                                            <i class="la la-file-excel-o text-success"></i>
                                        </span>
                                        <span class="navi-text">Excel - Filtrado</span>
                                    </a>
                                </li>
                                <li class="navi-item" onClick="exportarCustom('todos');">
                                    <a href="#" class="navi-link">
                                        <span class="navi-icon">
                                            <i class="la la-file-excel-o text-success"></i>
                                        </span>
                                        <span class="navi-text">Excel - Todo</span>
                                    </a>
                                </li>
                                <li class="navi-item" onClick="exportarCustom('pdf');">
                                    <a href="#" class="navi-link">
                                        <span class="navi-icon">
                                            <i class="la la-file-pdf-o text-danger"></i>
                                        </span>
                                        <span class="navi-text">PDF - Todo</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="dropdown dropdown-inline">
                    <div class="dropdown dropdown-inline ">
                        <button type="button" class="btn btn-light-primary font-weight-bolder dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Filtros
                        </button>
                        <div class="dropdown-menu dropdown-menu-sm dropdown-menu-right" style="">
                            <ul class="navi flex-column navi-hover py-2">
                                <li class="navi-header font-weight-bolder text-uppercase font-size-sm text-primary pb-2">Elija una opci&oacute;n:</li>
                                <li class="navi-item">
                                    <a href="#" class="navi-link">
                                        <span class="navi-text mostrar-filtros">Mostrar Tiles</span>
                                    </a>
                                </li>
                                <li class="navi-item">
                                    <a href="#" class="navi-link">
                                        <span class="navi-text mostrar-actividad-reciente">Mostrar Filtros</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row padding-top-15">
            <div class="col-md-12" id="filtros">
                {% include 'pedido/index_panel.html.twig' %}
            </div>
            <div class="col-md-6 actividad-reciente">
                {% include 'pedido/filtros.html.twig' %}
            </div>
            <div class="col-md-6 actividad-reciente">
                {% include 'pedido/index_actividad_reciente.html.twig' %}
            </div>
        </div>

        <div class="card-body padding-top-0 padding-bottom-0">
            <!--begin: Datatable-->
            <table class="table table-bordered table-hover" id="table-pedido">
                <thead>
                <tr>
                    <th style="width: 5px; padding: 0">ID</th>
                    <th data-type="string" class="text-center">PEDIDO</th>
                    <th data-type="string" class="text-center">PRODUCTO</th>
                    <th data-type="string" class="text-center">F. PEDIDO</th>
                    <th data-type="string" class="text-center">PRODUCTO</th>
                    <th data-type="string" class="text-center">CLIENTE</th>
                    <th data-type="string" class="text-center">B. SEMBRADAS</th>
                    <th data-type="string" class="text-center">F. SIEMBRA</th>
                    <th data-type="string" class="text-center">F. ENTREGA</th>
                    <th data-type="select" data-select="{{ estadoSelect }}">ESTADO</th>
                    <th data-type="string" class="text-center">DIAS CAMARA</th>
                    <th data-type="string" class="text-center">DIAS INVERNACULO</th>
                    <th data-type="string" class="text-center">O. SIEMBRA</th>
                    <th data-type="string" class="text-center">MESADA</th>
                    <th data-type="search" style="width: 5px; padding: 0"></th>
                </tr>
                </thead>
            </table>
            <!--end: Datatable-->
        </div>
    </div>

    <!-- Modal-->
    <div class="modal fade" id="exampleModalCustomScrollable" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Historico Estados</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i aria-hidden="true" class="ki ki-close"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div data-scroll="false" data-height="300">
                        {% include 'pedido/historico_estados.html.twig' %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}

    <script>
        var KTAppSettings = {
            "breakpoints": {
                "sm": 576,
                "md": 768,
                "lg": 992,
                "xl": 1200,
                "xxl": 1400
            },
            "colors": {
                "theme": {
                    "base": {
                        "white": "#ffffff",
                        "primary": "#3699FF",
                        "secondary": "#E5EAEE",
                        "success": "#1BC5BD",
                        "info": "#8950FC",
                        "warning": "#FFA800",
                        "danger": "#F64E60",
                        "light": "#E4E6EF",
                        "dark": "#181C32"
                    },
                    "light": {
                        "white": "#ffffff",
                        "primary": "#E1F0FF",
                        "secondary": "#EBEDF3",
                        "success": "#C9F7F5",
                        "info": "#EEE5FF",
                        "warning": "#FFF4DE",
                        "danger": "#FFE2E5",
                        "light": "#F3F6F9",
                        "dark": "#D6D6E0"
                    },
                    "inverse": {
                        "white": "#ffffff",
                        "primary": "#ffffff",
                        "secondary": "#3F4254",
                        "success": "#ffffff",
                        "info": "#ffffff",
                        "warning": "#ffffff",
                        "danger": "#ffffff",
                        "light": "#464E5F",
                        "dark": "#ffffff"
                    }
                },
                "gray": {
                    "gray-100": "#F3F6F9",
                    "gray-200": "#EBEDF3",
                    "gray-300": "#E4E6EF",
                    "gray-400": "#D1D3E0",
                    "gray-500": "#B5B5C3",
                    "gray-600": "#7E8299",
                    "gray-700": "#5E6278",
                    "gray-800": "#3F4254",
                    "gray-900": "#181C32"
                }
            },
            "font-family": "Poppins"
        };

        var __HOMEPAGE_PATH__ = '{{ path('homepage') }}';
    </script>
    <!--end::Global Config-->



    <!--begin::Global Theme Bundle(used by all pages)-->
    <script src="{{ asset(plugins_path ~ 'global/plugins.bundle.js') }}"></script>
    <script src="{{ asset(plugins_path ~ 'custom/prismjs/prismjs.bundle.js') }}"></script>
    <script src="{{ asset(js_path ~ 'scripts.bundle.js') }}"></script>
    <!--end::Global Theme Bundle-->

    <script src="{{ asset('js/functions.js') }}"></script>

    {# Bootbox #}
    <script src="{{ asset('plugins/bootbox/bootbox.js') }}" type="text/javascript"></script>


    <script src="{{ asset('js/kt-util.js') }}"></script>


    {# Select2 ES #}
    <script src="{{ asset('plugins/select2/dist/js/i18n/es.js') }}"
            type="text/javascript"></script>

    {# Datepicker #}
    <script src="{{ asset('plugins/bootstrap-datepicker.es.js') }}"></script>

    <!--begin::Script notificaciones-->
    <script type="text/javascript" src="{{ asset('js/config/notificacion.js') }}"></script>
    <!--end::Script notificaciones-->

    <!--begin::Script menu-->
    <script type="text/javascript" src="{{ asset('js/config/menu.js') }}"></script>
    <!--end::Script menu-->

    <script type="text/javascript" src="{{ asset('js/config/config-spinner.js') }}"></script>


    {# ToastR #}
    <script src="{{ asset('plugins/toastr-master/build/toastr.min.js') }}"></script>

    {# Busy Load #}
    <script src="{{ asset('plugins/busy-load/app.min.js') }}"></script>

    <script type="text/javascript" src="{{ asset(plugins_path ~ 'custom/datatables/datatables.bundle.js') }}"></script>

    <script src="{{ asset(__PREFIX_JAVASCRIPT__ ~ 'config/config-form.js') }}" ></script>
    <script src="{{ asset(__PREFIX_JAVASCRIPT__ ~ 'config/config-datatables.js') }}" ></script>

    <script src="{{ asset(__PREFIX_JAVASCRIPT__ ~ 'app/pedido/index.js') }}" ></script>

{% endblock %}


{% extends 'base.html.twig' %}
{% import 'app/_macro_show.html.twig' as macro_show %}

{% block stylesheets %}
    {{ parent() }}
    <style type="text/css">
        .card.card-detail .card-header {
            padding: 15px;
            background-color: #f5f5f5;
        }

        .card.card-detail {
            margin-bottom: 20px;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="card card-custom">
        <div class="card-header">
            <div class="card-title">
                <span class="card-icon"><i class="flaticon-search text-primary"></i></span>
                <h3 class="card-label">{{ entity }} - {{ entity.fechaCreacion|date('d/m/Y') }}</h3>
            </div>
        </div>
        <div class="card-body">

            {% include 'remito/datos_cliente.html.twig' with {cliente: entity.cliente } %}

            <div class="card card-detail">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-6"><h4>Entrega</h4></div>
                        <div class="col-md-6 text-right">
                            {# Acciones por producto si querés incluirlas #}
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        {{ macro_show._show_detail('Fecha Entrega', entity.fechaCreacion|date('d/m/Y'), 'col-md-2') }}
                        <div class="col-md-2">
                            <div class="form-group">
                                <label class="control-label d-block">
                                    Estado Entrega
                                </label>
                                <span class="label label-inline font-weight-bold {{ entity.estado.color|default('') }}" style="padding: 20px;">{{ entity.estado.nombre|default('') }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card card-detail">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-6"><h4>Productos entregados</h4></div>
                        <div class="col-md-6 text-right">
                            {# Acciones por producto si querés incluirlas #}
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    {% for entregaProducto in entity.entregasProductos %}
                        {% set producto = entregaProducto.pedidoProducto %}
                        <div class="row">
                            <div class="d-flex flex-column font-weight-bold justify-content-center mr-5">
                                <span class="label label-inline font-weight-bold" style="padding: 20px; color: #fff; background-color: {{ producto.tipoProducto.color }}">{{ producto.productoBandeja }}</span>
                            </div>
                            <div class="d-flex flex-column font-weight-bold justify-content-center">
                                <span class="label label-inline font-weight-bold {{ producto.estado.color }}" style="padding: 20px;">{{ producto.estado.nombre }}</span>
                            </div>
                            {{ macro_show._show_detail('Numero Orden', producto.getNumeroOrdenCompleto|default('-'), 'col-md-2') }}
                            {{ macro_show._show_detail('Bandejas Entregadas', entregaProducto.cantidadBandejas|default('-'), 'col-md-2') }}
                            {{ macro_show._show_detail('Precio Unitario', entregaProducto.precioUnitario|money_format|default('-'), 'col-md-2') }}
                            {{ macro_show._show_detail('Subtotal', entregaProducto.getPrecioSubTotal|money_format|default('-'), 'col-md-2') }}
                        </div>
                    {% endfor %}
                </div>
            </div>

            {% if entity.remito %}
                {% include 'remito/datos_remito.html.twig' with {entity: entity.remito } %}
            {% else %}
            <div class="card card-detail">
                <h4 class="card-header">Remito</h4>
                <div class="card-body">
                    <div class="row">
                        Sin Remito
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="card-footer d-flex justify-content-between">
                <a href="{{ path('entrega_index') }}" class="btn btn-light-dark font-weight-bold">Volver al listado</a>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset(__PREFIX_JAVASCRIPT__ ~ 'app/entrega/show.js') }}"></script>
{% endblock %}
